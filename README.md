# api_yamdb
![example workflow](https://github.com/loren166/yamdb_final/actions/workflows/yamdb_workflow.yml/badge.svg)

Api_yamdb - групповой проект, который собирает отзывы(Reviews) пользователей на произведения(Title). Данный проект не является хранилищем, тут нельзя посмотреть фильм, или послушать музыку. Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен.

Произведения делятся на жанры из списка предустановленных(Genre).

Добавлять произведения, категории или жанры может только администратор.

Так же у произведений есть система рейтинга, пользователи могут единоразово выставить рейтинг, после чего у произведения складывается средняя оценка.

Пользователи могут оставить произведению отзыв, и так же комментарий к отзыву. Оставлять оценку, комментарии и отзывы могут только аутентифицированные пользователи.

Для автоматизации развертывания на боевых серверах используется среда виртуализации Docker, а также Docker-compose - инструмент для запуска многоконтейнерных приложений.

Полная документация к API находится по эндпоинту /redoc

## Стек технологий:
>Python | 
>Django | 
>Django Rest Framework | 
>Rest API | 
>JWT token | 
>Docker |
>Gunicorn |
>Nginx |

## .env
```
В директории infra_sp2/infra вы можете найти файл .env.example по примеру которого в этой же директории вам нужно заполнить .env файл актуальными секретами
cat infra/.env.example > infra/.env
```

## Команды для запуска приложения в контейнерах
Для запуска проекта в контейнерах переходим в директорию infra/, где лежит файл docker-compose.yaml, и прописываем docker-compose up --build

После сборки контейнеров выполяем:
```bash
# Выполняем миграции
docker-compose exec web python manage.py migrate
# Создаем суперппользователя
docker-compose exec web python manage.py createsuperuser
# Собираем статику со всего проекта
docker-compose exec web python manage.py collectstatic --no-input
# Для дампа данных из БД
docker-compose exec web python manage.py dumpdata > dump.json
```

## Команда для заполнения БД данными из csv:
```python manage.py loaddata fixtures.json``` в контейнере web (```docker-compose exec web bash```)

## Документация
Документация будет доступна по эндпоинту /redoc/.